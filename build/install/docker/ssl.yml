version: '2'
services:
  onlyoffice-appserver-proxy:
    container_name: onlyoffice-appserver-proxy
    image: nginx
    stdin_open: true
    volumes:
      - ./appserver-proxy.conf:/etc/nginx/conf.d/default.conf
      - /app/onlyoffice/CommunityServer/data/certs/onlyoffice.crt:/etc/ssl/private/server.crt
      - /app/onlyoffice/CommunityServer/data/certs/onlyoffice.key:/etc/ssl/private/server.key
      - /app/onlyoffice/CommunityServer/data/certs/dhparam.pem:/etc/ssl/private/dhparam.pem
      - /etc/letsencrypt/live/m.nct-appserver.onlyoffice.com/fullchain.pem:/etc/letsencrypt/live/m.nct-appserver.onlyoffice.com/fullchain.pem
      - /etc/letsencrypt/live/m.nct-appserver.onlyoffice.com/privkey.pem:/etc/letsencrypt/live/m.nct-appserver.onlyoffice.com/privkey.pem
    restart: always
    ports:
      - '80:80'
      - '443:443'

networks:
  default:
    external:
      name: onlyoffice
